@(username: String)(implicit request: RequestHeader)

@main(Some(username)) {

  <script type="text/javascript" charset="utf-8">
      var socketURL = "@routes.Application.handleSocketConnection(username).webSocketURL()";
  </script>

  <script type="text/javascript" src='@routes.Assets.at("javascripts/lib/underscore.js")'></script>
  <script type="text/javascript" src='@routes.Assets.at("javascripts/lib/mousetrap.min.js")'></script>
  <script type="text/javascript" src='@routes.Assets.at("javascripts/util/exports-init.js")'></script>
  <script type="text/javascript" src='@routes.Assets.at("javascripts/util/node/listnode.js")'></script>
  <script type="text/javascript" src='@routes.Assets.at("javascripts/util/node/mapnode.js")'></script>
  <script type="text/javascript" src='@routes.Assets.at("javascripts/util/node/textholder.js")'></script>
  <script type="text/javascript" src='@routes.Assets.at("javascripts/util/circlemap.js")'></script>
  <script type="text/javascript" src='@routes.Assets.at("javascripts/util/doublelist.js")'></script>
  <script type="text/javascript" src='@routes.Assets.at("javascripts/chat.js")'></script>
  <script type="text/javascript" src='@routes.Assets.at("javascripts/event/chat-events.js")'></script>

  <div id="onError" class="alert-message error">
    <p>
      <strong>Oops!</strong> <span></span>
    </p>
  </div>

  <div id="onChat" class="row">
    <table id="chat" style="border: none; table-layout: fixed">
      <tr>
        <td width=80%>
          <div id="container" style="border: 1px inset #CCCCCC; height: 20em; padding: .385em; margin-right: 10pt; overflow: auto" tabindex="0">
            <div id="chatLog" style="width: 97%; border-collapse: collapse; table-layout: fixed; margin-right: 1.5%; margin-left: 1.5%"></div>
          </div>
        </td>
        <td width=20%>
          <div id="onlineLog" style="border: 1px inset #CCCCCC; height: 20em; padding: .385em; overflow: auto">
            <table id="usersTable" style="width: 100%; table-layout: fixed">
              <thead>
                <tr>
                  <td style="line-height: 20pt; vertical-align: middle; font-weight: bold;">Online:</td>
                </tr>
              </thead>
              <tbody id="usersOnline"></tbody>
            </table>
          </div>
        </td>
      </tr>
    </table>
    <table id="inputs" style="margin: 5px">
      <tr style="height: 15px" valign="middle">
        <td id="agentType" style="font-size: 8pt; width: 50px; height: 100%;" cellspacing="3px" cellpadding="3px"></td>
        <td style="height: 100%" cellspacing="3px" cellpadding="3px">
          <input id="inputBuffer" value="" autofocus="autofocus" style="width: 507px;" class="mousetrap">
        </td>
      </tr>
    </table>
  </div>

}
